<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Supabase Auth App</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Supabase Browser CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body class="min-h-screen bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center p-4">

  <!-- CARD -->
  <div class="bg-white w-full max-w-md rounded-2xl shadow-xl p-6">

    <h1 class="text-2xl font-bold text-center mb-6">Welcome</h1>

    <!-- LOGIN -->
    <div id="loginBox">
      <input id="loginEmail" class="w-full mb-3 p-3 border rounded-lg" placeholder="Email">
      <input id="loginPassword" type="password" class="w-full mb-4 p-3 border rounded-lg" placeholder="Password">

      <button id="loginBtn" type="button"
        class="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700">
        Login
      </button>

      <p class="text-center text-sm mt-4">
        No account?
        <button id="toSignup" class="text-indigo-600 underline">Sign up</button>
      </p>
    </div>

    <!-- SIGNUP -->
    <div id="signupBox" class="hidden">
      <input id="signupEmail" class="w-full mb-3 p-3 border rounded-lg" placeholder="Email">
      <input id="signupPassword" type="password" class="w-full mb-4 p-3 border rounded-lg" placeholder="Password">

      <button id="signupBtn" type="button"
        class="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700">
        Sign Up
      </button>

      <p class="text-center text-sm mt-4">
        Already have account?
        <button id="toLogin" class="text-indigo-600 underline">Login</button>
      </p>
    </div>

    <!-- APP -->
    <div id="appBox" class="hidden text-center">
      <p class="mb-4 font-semibold">You are logged in ðŸŽ‰</p>
      <button id="logoutBtn" class="text-red-600 underline">Logout</button>
    </div>

  </div>

  <!-- SCRIPT -->
  <script>
    /* ========= SUPABASE CONFIG ========= */
    const SUPABASE_URL = "https://pwzruhuaawuydeuyopmy.supabase.co";
    const SUPABASE_ANON_KEY = "sb_publishable_l0jJWhRPPTnlw0zH4XgF2Q_V3mCAiBE";

    const supabase = window.supabase.createClient(
      SUPABASE_URL,
      SUPABASE_ANON_KEY
    );

    /* ========= ELEMENTS ========= */
    const loginBox = document.getElementById("loginBox");
    const signupBox = document.getElementById("signupBox");
    const appBox = document.getElementById("appBox");

    const loginBtn = document.getElementById("loginBtn");
    const signupBtn = document.getElementById("signupBtn");
    const logoutBtn = document.getElementById("logoutBtn");
    const toSignup = document.getElementById("toSignup");
    const toLogin = document.getElementById("toLogin");

    /* ========= UI ========= */
    function showLogin() {
      loginBox.classList.remove("hidden");
      signupBox.classList.add("hidden");
      appBox.classList.add("hidden");
    }

    function showSignup() {
      signupBox.classList.remove("hidden");
      loginBox.classList.add("hidden");
      appBox.classList.add("hidden");
    }

    function showApp() {
      loginBox.classList.add("hidden");
      signupBox.classList.add("hidden");
      appBox.classList.remove("hidden");
    }

    /* ========= AUTH ========= */
    async function signup() {
      const email = signupEmail.value.trim();
      const password = signupPassword.value;

      if (!email || !password) {
        alert("Fill all fields");
        return;
      }

      const { error } = await supabase.auth.signUp({ email, password });
      if (error) alert(error.message);
      else alert("Check your email to confirm signup");
    }

    async function login() {
      const email = loginEmail.value.trim();
      const password = loginPassword.value;

      const { error } = await supabase.auth.signInWithPassword({
        email,
        password
      });

      if (error) alert(error.message);
      else showApp();
    }

    async function logout() {
      await supabase.auth.signOut();
      showLogin();
    }

    /* ========= EVENTS ========= */
    loginBtn.addEventListener("click", login);
    signupBtn.addEventListener("click", signup);
    logoutBtn.addEventListener("click", logout);
    toSignup.addEventListener("click", showSignup);
    toLogin.addEventListener("click", showLogin);

    /* ========= AUTO LOGIN ========= */
    supabase.auth.getSession().then(({ data }) => {
      if (data.session) showApp();
    });
  </script>

</body>
</html>
